{% extends 'app/base.html' %}
{% load static %}
{% block banner_slider %}
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trang chủ</title>
  {% load static %}
  <style>
    /* Định dạng cho phần chính */
    .main-container {
      display: flex;
      width: 100%;
    }

    /* Cột bên trái (Danh mục sản phẩm và Đánh giá sản phẩm) */
    .sidebar {
      width: 20%; /* Chiếm 20% màn hình */
      padding: 20px;
      background-color: #f8f8f8;
      border-right: 2px solid #ccc;
    }

    /* Cột bên phải (Hiển thị sản phẩm) */
                    /* Đảm bảo ảnh có kích thước cố định và không bị kéo dãn *//* Nhãn giảm giá ở góc trên bên trái */
                    .discount-label {
                      position: absolute;
                      top: 5px;
                      left: 5px;
                      background-color: #FF6F61;
                      color: white;
                      padding: 5px 10px;
                      font-weight: bold;
                      border-radius: 5px;
                      font-size: 14px;
                      z-index: 10;
                    }
                    
                    /* Đảm bảo phần ảnh có kích thước cố định và không bị cắt */
                    .product-image {
                      width: 100%;
                      height: 200px;
                      overflow: hidden;
                      display: flex;
                      justify-content: center;
                      align-items: center;
                    }
                    
                    .product-image img {
                      max-width: 100%;
                      max-height: 100%;
                      object-fit: contain;
                    }
                    
                    /* Chỉnh phần 5 sao và yêu thích trên cùng 1 dòng */
                    .product-footer {
                      display: flex;
                      justify-content: space-between;
                      align-items: center;
                      margin-top: 10px;
                    }
                    
                    .product-rating {
                      display: flex;
                      justify-content: left;
                    }
                    
                    .product-rating .star {
                      color: gold;
                      font-size: 20px;
                    }
                    
                    /* Nút yêu thích */
                    .favorite-btn {
                      background-color: #FF6F61;
                      color: white;
                      border: none;
                      padding: 5px 10px;
                      cursor: pointer;
                      border-radius: 5px;
                    }
                    
                    .favorite-btn:hover {
                      background-color: #D94E44;
                    }
    

    .product-container {
      width: 80%; /* Chiếm 80% màn hình */
      padding: 20px;
    }

    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    .pagination a, .pagination .current {
      margin: 0 10px;
      color: black;
      text-decoration: none;
    }

    .pagination .current {
      font-weight: bold;
    }

    /* Định dạng cho phần danh mục và đánh giá sản phẩm */
    .category-list, .rating-section {
      margin-bottom: 15px;
    }

    .category-list h4, .rating-section h4 {
      font-size: 18px;
      font-weight: bold;
    }

    .category-list ul {
      list-style-type: none;
      padding-left: 0;
    }

    .category-list ul li:hover {
      background-color: #f0f0f0;
      margin: 8px 0;
    }

    .rating-section select {
      width: 100%;
      padding: 8px;
      margin-top: 10px;
    }
  </style>
</head>
<div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-interval="5000">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="3" aria-label="Slide 4"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="{% static 'app/images/banner/slider3.jpg' %}" class="d-block w-100" alt="Các sản phẩm bán chạy" style="height: 300px; object-fit: fit;"/>
    </div>
    <div class="carousel-item">
      <img src="{% static 'app/images/banner/slider2.jpg' %}" class="d-block w-100" alt="Các sản phẩm bán chạy" style="height: 300px; object-fit: fit;"/>
    </div>
    <div class="carousel-item">
      <img src="{% static 'app/images/banner/slider1.jpg' %}" class="d-block w-100" alt="Các sản phẩm bán chạy" style="height: 300px; object-fit: fit;"/>
    </div>
    <div class="carousel-item">
      <img src="{% static 'app/images/banner/slider4.jpg' %}" class="d-block w-100" alt="Các sản phẩm bán chạy" style="height: 300px; object-fit: fit;"/>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>
{% endblock banner_slider %}

{% block main-content %}
<div class="main-container">
  <!-- Cột bên trái: Danh mục sản phẩm  -->
  <div class="sidebar" style="padding: 30px; border: 2px solid #ccc; border-radius: 10px;margin-left: 30px;margin-top:30px; margin-right: auto;width:300px;">
    <div class="category-list">
      <h4 style="text-align: center;">Danh mục sản phẩm</h4>
      <ul style="list-style: none; padding: 0;">
        <li style="display: flex; align-items: center; justify-content: center; margin: 7px 0; border: 1px solid #ddd; border-radius: 8px; padding: 10px;">
          <img src="{% static 'app/icons/ip.png' %}" alt="icon" style="width: 25px; height:25px; margin-right: 10px;">
          <a href="#">Iphone</a>
        </li>
        <li style="display: flex; align-items: center; justify-content: center; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; padding: 10px;">
          <img src="{% static 'app/icons/samsung.png' %}" alt="icon" style="width: 25px; height: 25px; margin-right: 10px;">
          <a href="#">Samsung</a>
        </li>
        <li style="display: flex; align-items: center; justify-content: center; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; padding: 10px;">
          <img src="{% static 'app/icons/xiaomi.png' %}" alt="icon" style="width: 25px; height: 25px; margin-right: 10px;">
          <a href="#">Xiaomi</a>
        </li>
        <li style="display: flex; align-items: center; justify-content: center; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; padding: 10px;">
          <img src="{% static 'app/icons/nokia.png' %}" alt="icon" style="width: 25px; height: 25px; margin-right: 10px;">
          <a href="#">Nokia</a>
        </li>
        <li style="display: flex; align-items: center; justify-content: center; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; padding: 10px;">
          <img src="{% static 'app/icons/oppo.png' %}" alt="icon" style="width: 25px; height: 25px; margin-right: 10px;">
          <a href="#">OPPO</a>
        </li>
        <li style="display: flex; align-items: center; justify-content: center; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; padding: 10px;">
          <img src="{% static 'app/icons/vivo.png' %}" alt="icon" style="width: 25px; height: 25px; margin-right: 10px;">
          <a href="#">Vivo</a>
        </li>        
      </ul>
    </div>
  </div>
  

  <!-- Cột bên phải: Hiển thị sản phẩm -->
  <div class="product-container">
    <div class="row" style="width: 100%; margin-left: auto; margin-right: auto;">
      {% for product in page_obj %}
      <div class="col-lg-3">
        <div class="product-box" style="border: 2px solid #ccc; border-radius: 15px; position: relative;">
          
          <!-- Nhãn giảm giá ở góc trên bên trái -->
          <div class="discount-label">
            Giảm {{ product.discount_percentage }}%
          </div>
          
          <!-- Tách phần ảnh thành khối riêng -->
          <div class="product-image">
            <img class="thumbnail" src="{{product.ImageURL}}" alt="{{ product.name }}">
          </div>
    
          <div class="box-element product">
            <h6><strong>{{product.name}}</strong></h6>
            <h5 class="price" style="color:red; display: inline-block; float:right;"><strong>{{ product.price }}</strong></h5>
            <hr>
            <div class="btn-group" style="width: 100%;">
              <button data-product="{{product.id}}" data-action="add" class="btn btn-outline-secondary add-btn1 update-cart">Thêm vào giỏ</button>
              <a class="btn btn-outline-success" href="{% url 'detail' %}?id={{product.id}}">Xem</a> 
            </div>
            
            <!-- Biểu tượng 5 sao và nút yêu thích trên cùng một dòng -->
            <div class="product-footer">
              <!-- Biểu tượng 5 sao -->
              <div class="product-rating">
                <span style =" margin-left:3px;margin-right:3px; bold"> Rate  </span>
                <span class="star">&#9733;</span>
                <span class="star">&#9733;</span>
                <span class="star">&#9733;</span>
                <span class="star">&#9733;</span>
                <span class="star">&#9733;</span>
              </div>
              
              <!-- Nút yêu thích -->
              <button class="favorite-btn" onclick="addToFavorites({{product.id}})">Yêu thích</button>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
    </div>
  </div>
</div>
<!-- Thêm nút chuyển trang -->
    <div class="pagination">
      <span class="step-links">
          {% if page_obj.has_previous %}
              <a href="?page=1">&laquo; Trang đầu</a>
              <a href="?page={{ page_obj.previous_page_number }}">Trang trước</a>
          {% endif %}

          <span class="current">
              Trang {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
          </span>

          {% if page_obj.has_next %}
              <a href="?page={{ page_obj.next_page_number }}">Trang sau</a>
              <a href="?page={{ page_obj.paginator.num_pages }}">Trang cuối &raquo;</a>
          {% endif %}
      </span>
    </div>
<br />
{% endblock main-content %}
